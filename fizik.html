<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Тест — повна версія</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
.option-correct {
  border-color: #22c55e !important;
  background-color: #dcfce7 !important;
  color: #166534 !important;
}
.dark .option-correct {
  border-color: #16a34a !important;
  background-color: #14532d !important;
  color: #86efac !important;
}

.option-wrong {
  border-color: #ef4444 !important;
  background-color: #fee2e2 !important;
  color: #991b1b !important;
}
.dark .option-wrong {
  border-color: #dc2626 !important;
  background-color: #7f1d1d !important;
  color: #fca5a5 !important;
}

.option-selected {
  border-color: #3b82f6 !important;
  background-color: #dbeafe !important;
  color: #1e40af !important;
}
.dark .option-selected {
  border-color: #2563eb !important;
  background-color: #1e3a8a !important;
  color: #93c5fd !important;
}
.butt-header {
      display: inline-block;
      padding: 10px 20px;
      margin: 0 5px;
      background: #9333ea;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.3s;
    }
    .mb-2, .font-bold,.text-xl ,.py-3 {
      color: white;
    }
    .butt-header:hover { background: #7e22ce; }
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      padding: 12px 16px;
      z-index: 1000;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    nav { display:flex; gap:8px; align-items:center; }
    body { padding-top:84px; }
    .dark body { background: #0a101e; }
    .dark header { background:#0b1220; color:#e6eef8; box-shadow: 0 2px 10px rgba(0,0,0,0.6); }
    .dark .butt-header { background:#7c3aed; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-4 flex items-center justify-center">
<header>
  <nav>
      <a class="butt-header" href="index.html">ЛААГ</a>
      <a class="butt-header" href="disaine.html">ДИЗАЙН</a>
      <a class="butt-header" href="algooritm.html">АЛГОРИТМ</a>
      <a class="butt-header" href="mova.html">МОВА</a>
      <a class="butt-header" href="fizik.html">ФІЗИКА</a>
  </nav>

  <div class="flex items-center gap-3">
    <button id="themeToggle" class="butt-header !bg-white !text-purple-700">Тема: Світла</button>
    <button id="startExamBtn" class="butt-header">Режим «Екзамен»</button>
  </div>
</header>

<main class="max-w-3xl w-full">
  <div id="quiz-container" class="max-w-3xl w-full"></div>
</main>

<script>

const QUESTIONS = [
  {
    id: 1,
    question: "Яким буде опір двох однакових провідників (з опором R), з’єднаних послідовно?",
    options: [
      "R / 2",
      "2R",
      "R²",
      "R"
    ],
    answer: 2
  },
  {
    id: 2,
    question: "Яким буде опір двох однакових провідників (з опором R), з’єднаних паралельно?",
    options: [
      "2R",
      "R / 2",
      "R",
      "4R"
    ],
    answer: 2
  },
  {
    id: 3,
    question: "Що в електродинаміці розуміють під «вузлом» провідників?",
    options: [
      "Місце приєднання джерела струму",
      "Будь-яке з'єднання двох провідників",
      "Точку розгалуження кола, у якій з'єднуються не менше трьох провідників",
      "Місце розриву кола"
    ],
    answer: 3
  },
  {
    id: 4,
    question: "За який час крізь поперечний переріз провідника пройшов електричний заряд 100 Кл за сили струму 25 мА?",
    options: [
      "4 с",
      "2500 с",
      "4000 с",
      "0,25 с"
    ],
    answer: 3
  },
  {
    id: 5,
    question: "Напруженість електричного поля рівна …",
    options: [
      "Силі, що діє на одиничний позитивний заряд, поміщений у цю точку",
      "Роботі по переміщенню заряду",
      "Добутку заряду на відстань",
      "Величині заряду, що створює поле"
    ],
    answer: 1
  },
  {
    id: 6,
    question: "Від чого залежить сила взаємодії заряджених частинок?",
    options: [
      "Тільки від величини зарядів",
      "Від величини зарядів, відстані між ними та середовища",
      "Тільки від відстані між ними",
      "Від маси частинок"
    ],
    answer: 2
  },
  {
    id: 7,
    question: "Різниця потенціалів між двома точками поля визначається за формулою …",
    options: [
      "φ₁ - φ₂ = q / A",
      "φ₁ - φ₂ = F · q",
      "φ₁ - φ₂ = A / q",
      "φ₁ - φ₂ = E · q"
    ],
    answer: 3
  },
  {
    id: 8,
    question: "За якою формулою обчислюють ємність плоского конденсатора?",
    options: [
      "C = qU",
      "C = εε₀S / d",
      "C = k · q / r²",
      "C = U / I"
    ],
    answer: 2
  },
  {
    id: 9,
    question: "При паралельному включенні конденсаторів їх ємність …",
    options: [
      "Зменшується",
      "Не змінюється",
      "Додається (збільшується)",
      "Стає рівною нулю"
    ],
    answer: 3
  },
  {
    id: 10,
    question: "Електроємність – це здатність …",
    options: [
      "Проводити електричний струм",
      "Накопичувати електричний заряд",
      "Створювати магнітне поле",
      "Нагріватися при проходженні струму"
    ],
    answer: 2
  },
  {
    id: 11,
    question: "Сила струму – це …",
    options: [
      "Хаотичний рух молекул",
      "Впорядкований (напрямлений) рух заряджених частинок",
      "Накопичення зарядів на поверхні",
      "Кількість теплоти, що виділяється"
    ],
    answer: 2
  },
  {
    id: 12,
    question: "Величина, що визначає роботу електричного струму при перенесенні заряду 1 Кл, називається …",
    options: [
      "Сила струму",
      "Електрична напруга",
      "Електроємність",
      "Опір"
    ],
    answer: 2
  },
  {
    id: 13,
    question: "Як зміниться маса зарядженого електроскопа після того, як до нього доторкнутись рукою?",
    options: [
      "Збільшиться вдвічі",
      "Не зміниться зовсім",
      "Зміниться на масу втрачених або набутих електронів (заряд зникне)",
      "Стане рівною нулю"
    ],
    answer: 3
  },
  {
    id: 14,
    question: "З якою метою в електростатиці вводиться фізична величина — напруженість електростатичного поля?",
    options: [
      "Для силової характеристики поля",
      "Для енергетичної характеристики поля",
      "Для вимірювання маси зарядів",
      "Для визначення швидкості зарядів"
    ],
    answer: 1
  },
  {
    id: 15,
    question: "Як взаємодіють між собою різнойменно заряджені тіла?",
    options: [
      "Відштовхуються",
      "Не взаємодіють",
      "Притягуються",
      "Обертаються навколо одне одного"
    ],
    answer: 3
  },
  {
    id: 16,
    question: "Яка величина дорівнює відношенню електричного заряду, що пройшов через поперечний переріз провідника, до часу його проходження?",
    options: [
      "Напруга",
      "Опір",
      "Сила струму",
      "Робота"
    ],
    answer: 3
  },
  {
    id: 17,
    question: "Сила струму в електричному колі 2А, при напрузі на його кінцях 5В. Знайти опір провідника.",
    options: [
      "0.4 Ом",
      "10 Ом",
      "2.5 Ом",
      "7 Ом"
    ],
    answer: 3
  },
  {
    id: 18,
    question: "Заряди двох однакових металевих куль відповідно дорівнюють –5,5 нКл та +1,5 нКл. Визначте заряд кожної кульки після дотику.",
    options: [
      "-2 нКл",
      "-4 нКл",
      "+2 нКл",
      "-3.5 нКл"
    ],
    answer: 1
  },
  {
    id: 19,
    question: "У яких одиницях у СІ вимірюється електричний заряд?",
    options: [
      "Ампер",
      "Вольт",
      "Кулон",
      "Фарада"
    ],
    answer: 3
  },
  {
    id: 20,
    question: "Якою формулою описується закон Кулона?",
    options: [
      "I = U / R",
      "F = ma",
      "F = k · |q₁ · q₂| / r²",
      "E = F / q"
    ],
    answer: 3
  },
  {
    id: 21,
    question: "Напруженість поля, створеного декількома точковими зарядами, дорівнює…",
    options: [
      "Алгебраїчній сумі зарядів",
      "Векторній сумі напруженостей полів кожного заряду (принцип суперпозиції)",
      "Добутку напруженостей",
      "Найбільшій з напруженостей"
    ],
    answer: 2
  },
  {
    id: 22,
    question: "Які характеристики електричного кола притаманні режиму короткого замикання?",
    options: [
      "Опір R → ∞, струм I = 0",
      "Опір R → 0, струм максимальний, напруга на клемах → 0",
      "Напруга дорівнює ЕРС, струм номінальний",
      "Потужність дорівнює нулю"
    ],
    answer: 2
  },
  {
    id: 23,
    question: "У яких одиницях у СІ вимірюється сила струму?",
    options: [
      "Вольт",
      "Ват",
      "Ампер",
      "Джоуль"
    ],
    answer: 3
  },
  {
    id: 24,
    question: "У яких одиницях у СІ вимірюється напруга?",
    options: [
      "Ампер",
      "Вольт",
      "Кулон",
      "Ом"
    ],
    answer: 2
  },
  {
    id: 25,
    question: "У яких одиницях у СІ вимірюється потужність?",
    options: [
      "Джоуль",
      "Ват",
      "Герц",
      "Ньютон"
    ],
    answer: 2
  },
  {
    id: 26,
    question: "У яких одиницях у СІ вимірюється частота?",
    options: [
      "Секунда",
      "Ват",
      "Герц",
      "Метр"
    ],
    answer: 3
  },
  {
    id: 27,
    question: "Електростатичне поле створюють заряди, які в даній системі відліку є ...",
    options: [
      "Рухомими",
      "Нерухомими",
      "Змінними",
      "Нейтральними"
    ],
    answer: 2
  },
  {
    id: 28,
    question: "Взаємодія між нерухомими зарядженими частинками здійснюється за допомогою ...",
    options: [
      "Магнітного поля",
      "Гравітаційного поля",
      "Електричного поля",
      "Механічного контакту"
    ],
    answer: 3
  },
  {
    id: 29,
    question: "Основною ознакою електричного поля є силова дія на ...",
    options: [
      "Магнітні стрілки",
      "Будь-які маси",
      "Електричні заряди",
      "Світлові промені"
    ],
    answer: 3
  },
  {
    id: 30,
    question: "При натиранні скляної пластинки шовком вона отримує позитивний заряд. Це означає, що ...",
    options: [
      "Вона отримала протони",
      "Вона втратила частину своїх електронів",
      "Вона отримала нейтрони",
      "Вона втратила атоми"
    ],
    answer: 2
  },
  {
    id: 31,
    question: "При натиранні ебонітової палички шерстю вона отримує негативний заряд. Це означає, що ...",
    options: [
      "Вона втратила протони",
      "Вона отримала надлишкові електрони",
      "Вона втратила електрони",
      "Ядро атома розпалося"
    ],
    answer: 2
  },
  {
    id: 32,
    question: "Який вираз є математичним записом закону збереження електричного заряду?",
    options: [
      "F = ma",
      "q₁ + q₂ + ... + qₙ = const",
      "E = mc²",
      "I = U/R"
    ],
    answer: 2
  },
  {
    id: 33,
    question: "Яка фізична величина є силовою характеристикою електричного поля?",
    options: [
      "Потенціал",
      "Напруга",
      "Напруженість",
      "Робота"
    ],
    answer: 3
  },
  {
    id: 34,
    question: "Одиницею електроємності в СІ є ...",
    options: [
      "Кулон",
      "Вольт",
      "Фарад",
      "Тесла"
    ],
    answer: 3
  },
  {
    id: 35,
    question: "Що показує діелектрична проникність діелектрика?",
    options: [
      "Максимальну напругу пробою",
      "У скільки разів сила взаємодії зарядів у середовищі менша, ніж у вакуумі",
      "Здатність проводити струм",
      "Величину заряду на поверхні"
    ],
    answer: 2
  },
  {
    id: 36,
    question: "В яких одиницях в СІ вимірюється робота електричного поля?",
    options: [
      "Ват",
      "Вольт",
      "Джоуль",
      "Ньютон"
    ],
    answer: 3
  },
  {
    id: 37,
    question: "Вкажіть елемент електричного кола, у якому обов’язково діють сторонні сили.",
    options: [
      "Резистор",
      "Конденсатор",
      "Джерело струму",
      "Ключ"
    ],
    answer: 3
  },
  {
    id: 38,
    question: "Електричний струм - це ...",
    options: [
      "Скупчення електронів",
      "Впорядкований рух заряджених частинок",
      "Рух атомів у речовині",
      "Електромагнітне випромінювання"
    ],
    answer: 2
  },
  {
    id: 39,
    question: "Яке співвідношення є математичним записом закону Ома для ділянки кола?",
    options: [
      "I = U · R",
      "R = U · I",
      "I = U / R",
      "U = I / R"
    ],
    answer: 3
  },
  {
    id: 40,
    question: "Яким має бути опір амперметра для вимірювання сили струму в ділянці кола?",
    options: [
      "Дуже великим",
      "Таким самим, як опір ділянки",
      "Дуже малим (ідеально — нульовим)",
      "Не має значення"
    ],
    answer: 3
  },
  {
    id: 41,
    question: "Лампочка електричного ліхтарика працює від акумулятора. Усередині акумулятора ...",
    options: [
      "Електрична енергія перетворюється в механічну",
      "Сторонні сили виконують роботу з розділення зарядів (хімічна в електричну)",
      "Вся енергія перетворюється в тепло",
      "Заряди зникають"
    ],
    answer: 2
  },
  {
    id: 42,
    question: "Чому при короткому замиканні напруга на клемах джерела дуже мала?",
    options: [
      "Бо джерело розряджається миттєво",
      "Бо майже вся ЕРС падає на внутрішньому опорі джерела",
      "Бо опір кола стає дуже великим",
      "Бо струм зникає"
    ],
    answer: 2
  },
  {
    id: 43,
    question: "Яка фізична величина є енергетичною характеристикою електричного поля?",
    options: [
      "Напруженість",
      "Сила струму",
      "Потенціал",
      "Заряд"
    ],
    answer: 3
  },
  {
    id: 44,
    question: "Ялинкова гірлянда складається з 20 лампочок, з’єднаних послідовно. Як зміниться розжарення ламп, якщо їх кількість збільшити до 30?",
    options: [
      "Збільшиться",
      "Не зміниться",
      "Зменшиться",
      "Лампи перегорять"
    ],
    answer: 3
  },
  {
    id: 45,
    question: "За допомогою електрометра можна виміряти …",
    options: [
      "Силу струму",
      "Різницю потенціалів",
      "Опір провідника",
      "Магнітну індукцію"
    ],
    answer: 2
  },
  {
    id: 46,
    question: "Які елементарні частинки переміщуються при електризації?",
    options: [
      "Протони",
      "Нейтрони",
      "Електрони",
      "Атоми"
    ],
    answer: 3
  },
  {
    id: 47,
    question: "Якого заряду не можна надати тілу?",
    options: [
      "Позитивного",
      "Негативного",
      "Дробового (меншого за заряд електрона)",
      "Великого"
    ],
    answer: 3
  },
  {
    id: 48,
    question: "Яка частинка не є носієм електричного заряду?",
    options: [
      "Електрон",
      "Протон",
      "Іон",
      "Нейтрон"
    ],
    answer: 4
  },
  {
    id: 49,
    question: "Питомий опір металів ...",
    options: [
      "Зменшується при нагріванні",
      "Не залежить від температури",
      "Зростає при нагріванні",
      "Залежить тільки від напруги"
    ],
    answer: 3
  },
  {
    id: 50,
    question: "Яку роботу виконує електричне поле при переміщені заряду 20 нКл із точки з потенціалом 500 В в точку з потенціалом 200 В?",
    options: [
      "14 мкДж",
      "6 мкДж",
      "10000 Дж",
      "0 Дж"
    ],
    answer: 2
  },
  {
    id: 51,
    question: "Як зміниться сила взаємодії між двома точковими зарядами, якщо кожний заряд зменшити в три рази?",
    options: [
      "Зменшиться в 3 рази",
      "Зменшиться в 9 разів",
      "Збільшиться в 3 рази",
      "Не зміниться"
    ],
    answer: 2
  },
  {
    id: 52,
    question: "У якому випадку тіло набуває негативного заряду?",
    options: [
      "Якщо воно втратило електрони",
      "Якщо воно отримало протони",
      "Якщо воно отримало надлишок електронів",
      "Якщо воно нагрілося"
    ],
    answer: 3
  },
  {
    id: 53,
    question: "Атом перетворився на позитивний іон. Чи змінилася його маса, якщо змінилася, то як?",
    options: [
      "Збільшилася",
      "Не змінилася",
      "Зменшилася (на масу втрачених електронів)",
      "Зникла"
    ],
    answer: 3
  },
  {
    id: 54,
    question: "Якого заряду (за значенням та величиною) набувають тіла при електризації тертям?",
    options: [
      "Різного за модулем",
      "Рівних за модулем, але протилежних за знаком",
      "Однакових за знаком",
      "Тільки позитивного"
    ],
    answer: 2
  },
  {
    id: 55,
    question: "Дві мідні дротини однакової довжини, що мають різний переріз, приєднані до джерела струму паралельно. У якій з них виділиться більша кількість теплоти?",
    options: [
      "У тонкій дротині",
      "Однаково в обох",
      "У товстій дротині (з більшим перерізом)",
      "Теплота не виділяється"
    ],
    answer: 3
  },
  {
    id: 56,
    question: "Якщо збільшити напругу на резисторі в 4 рази, то потужність струму в резисторі збільшиться:",
    options: [
      "У 4 рази",
      "У 8 разів",
      "У 16 разів",
      "У 2 рази"
    ],
    answer: 3
  },
  {
    id: 57,
    question: "При проходженні струму металевий провідник нагрівається, бо …",
    options: [
      "Руйнуються ядра атомів",
      "Електрони стикаються з іонами кристалічної гратки і передають їм енергію",
      "Виникає тертя між електронами",
      "Електрони поглинають світло"
    ],
    answer: 2
  },
  {
    id: 58,
    question: "1 Вт ∙ год – це …",
    options: [
      "Одиниця потужності",
      "Одиниця роботи (енергії), що дорівнює 3600 Дж",
      "Одиниця часу",
      "Одиниця заряду"
    ],
    answer: 2
  },
  {
    id: 59,
    question: "Чи залежить опір провідника від матеріалу, з якого він виготовлений?",
    options: [
      "Ні, не залежить",
      "Так, залежить від питомого опору речовини",
      "Залежить тільки від кольору",
      "Залежить тільки від густини"
    ],
    answer: 2
  },
  {
    id: 60,
    question: "Від чого залежить, а від чого не залежить опір провідника (для металів)?",
    options: [
      "Залежить від напруги, не залежить від матеріалу",
      "Залежить від сили струму, не залежить від довжини",
      "Залежить від матеріалу, розмірів і температури; не залежить від струму і напруги",
      "Не залежить ні від чого"
    ],
    answer: 3
  },
  {
    id: 61,
    question: "Для чого, в деяких випадках, послідовно до вольтметру під’єднують додатковий опір?",
    options: [
      "Щоб зменшити його опір",
      "Щоб розширити межі вимірювання напруги",
      "Щоб перетворити його на амперметр",
      "Щоб підвищити точність"
    ],
    answer: 2
  },
  {
    id: 62,
    question: "Яка формула є вірною при визначенні вектора напруженості електростатичного поля?",
    options: [
      "E = F · q",
      "E = F / q",
      "E = q / F",
      "E = A · q"
    ],
    answer: 2
  },
  {
    id: 63,
    question: "Як зміниться за модулем напруженість електричного поля точкового заряду при збільшенні відстані від заряду в два рази?",
    options: [
      "Зменшиться в 2 рази",
      "Збільшиться в 2 рази",
      "Зменшиться в 4 рази",
      "Не зміниться"
    ],
    answer: 3
  },
  {
    id: 64,
    question: "Енергетична характеристика електричного поля – це його …",
    options: [
      "Напруженість",
      "Потенціал",
      "Діелектрична проникність",
      "Силова лінія"
    ],
    answer: 2
  },
  {
    id: 65,
    question: "За допомогою електрометра можна виміряти ...",
    options: [
      "Тільки заряд",
      "Різницю потенціалів відносно землі",
      "Опір повітря",
      "Швидкість електронів"
    ],
    answer: 2
  },
  {
    id: 66,
    question: "Визначте напруженість поля в центрі кільця, радіус якого R, по якому рівномірно розподілений заряд q.",
    options: [
      "kq / R²",
      "kq / R",
      "Нуль (0)",
      "Нескінченність"
    ],
    answer: 3
  },
  {
    id: 67,
    question: "Який вигляд має вольт-амперна характеристика для провідника, що підкоряється закону Ома?",
    options: [
      "Парабола",
      "Гіпербола",
      "Пряма лінія, що проходить через початок координат",
      "Синусоїда"
    ],
    answer: 3
  },
  {
    id: 68,
    question: "За допомогою чого здійснюється взаємодія між зарядженими частинками?",
    options: [
      "Механічних хвиль",
      "Електричного поля",
      "Звукових хвиль",
      "Теплового випромінювання"
    ],
    answer: 2
  },
  {
    id: 69,
    question: "Вкажіть, як в електричне коло підʼєднують вольтметр.",
    options: [
      "Послідовно",
      "Паралельно",
      "Замість джерела",
      "Як завгодно"
    ],
    answer: 2
  },
  {
    id: 70,
    question: "Вкажіть, як в електричне коло підʼєднують амперметр.",
    options: [
      "Паралельно",
      "Послідовно",
      "До клем джерела",
      "Через конденсатор"
    ],
    answer: 2
  },
  {
    id: 71,
    question: "Вкажіть, як графічно зображується потенціал?",
    options: [
      "Векторами",
      "Еквіпотенціальними поверхнями",
      "Точками",
      "Стрілками сили"
    ],
    answer: 2
  },
  {
    id: 72,
    question: "Поле, напруженість якого в усіх точках однакова за модулем і напрямком, називається...",
    options: [
      "Центральним",
      "Вихровим",
      "Однорідним",
      "Неоднорідним"
    ],
    answer: 3
  },
  {
    id: 73,
    question: "Поверхня, в усіх точках якої потенціал електростатичного поля має однакове значення називається ...",
    options: [
      "Еквіпотенціальна поверхня",
      "Ізотермічна поверхня",
      "Діелектрична поверхня",
      "Заряджена площина"
    ],
    answer: 1
  },
  {
    id: 74,
    question: "Які величини залишаються незмінними при під’єднанні до зарядженого конденсатора послідовно ще одного, якщо він ввімкнений до джерела постійного струму?",
    options: [
      "Заряд на пластинах",
      "Ємність системи",
      "Загальна напруга (вона дорівнює напрузі джерела)",
      "Напруженість поля"
    ],
    answer: 3
  },
  {
    id: 75,
    question: "Які величини залишаються незмінними при під’єднанні до зарядженого конденсатора паралельно ще одного, якщо він ввімкнений до джерела постійного струму?",
    options: [
      "Загальний заряд",
      "Загальна ємність",
      "Напруга на обкладках конденсаторів",
      "Енергія поля"
    ],
    answer: 3
  },
  {
    id: 76,
    question: "Що являє собою електроємність як фізична величина?",
    options: [
      "Відношення напруги до заряду",
      "Відношення заряду конденсатора до різниці потенціалів",
      "Добуток заряду на напругу",
      "Силу взаємодії пластин"
    ],
    answer: 2
  },
  {
    id: 77,
    question: "Як зміниться електроємність конденсатора при вилученні з нього діелектрика з проникністю ε = 2?",
    options: [
      "Збільшиться у 2 рази",
      "Не зміниться",
      "Зменшиться у 2 рази",
      "Стане рівною нулю"
    ],
    answer: 3
  },
  {
    id: 78,
    question: "У якому з трьох послідовно з'єднаних провідників виділяється найбільша кількість теплоти, якщо R1 < R2 < R3?",
    options: [
      "У R1",
      "У R2",
      "У R3 (найбільший опір)",
      "У всіх однаково"
    ],
    answer: 3
  },
  {
    id: 79,
    question: "У якому з трьох паралельно з'єднаних провідників виділяється найбільша кількість теплоти, якщо R1 < R2 < R3?",
    options: [
      "У R1 (найменший опір)",
      "У R2",
      "У R3",
      "У всіх однаково"
    ],
    answer: 1
  },
  {
    id: 80,
    question: "При якому зовнішньому опорі потужність, що на ньому виділяється, буде максимальною?",
    options: [
      "При R = 0",
      "При R → ∞",
      "Коли R = r (зовнішній опір дорівнює внутрішньому)",
      "При будь-якому опорі"
    ],
    answer: 3
  }
];
let currentQuestion = 0;
let selectedAnswer = null;
let selectedAnswers = [];
let score = 0;

let examMode = false;
const EXAM_SECONDS = 25 * 60; 
let examRemaining = EXAM_SECONDS;
let examTimerInterval = null;

const container = document.getElementById("quiz-container");
const STORAGE_KEY = "quiz_app_state_v1";
const THEME_KEY = "quiz_theme_v1";

function saveState() {
  const state = {
    currentQuestion,
    selectedAnswer,
    selectedAnswers,
    score,
    examMode,
    examRemaining,
    questionsAnswers: QUESTIONS.map(q => q.answer) 
  };
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

function loadState() {
  const raw = localStorage.getItem(STORAGE_KEY);
  if (!raw) return false;
  try {
    const s = JSON.parse(raw);
    currentQuestion = s.currentQuestion ?? 0;
    selectedAnswer = s.selectedAnswer ?? null;
    selectedAnswers = s.selectedAnswers ?? [];
    score = s.score ?? 0;
    examMode = s.examMode ?? false;
    examRemaining = s.examRemaining ?? EXAM_SECONDS;
    return true;
  } catch(e) { return false; }
}

function clearState() {
  localStorage.removeItem(STORAGE_KEY);
}

function applyTheme(theme) {
  if (theme === "dark") {
    document.documentElement.classList.add("dark");
    document.getElementById("themeToggle").innerText = "Тема: Темна";
  } else {
    document.documentElement.classList.remove("dark");
    document.getElementById("themeToggle").innerText = "Тема: Світла";
  }
  localStorage.setItem(THEME_KEY, theme);
}
document.getElementById("themeToggle").addEventListener("click", () => {
  const current = localStorage.getItem(THEME_KEY) || "light";
  applyTheme(current === "light" ? "dark" : "light");
});
applyTheme(localStorage.getItem(THEME_KEY) || "light");

function startExamTimer() {
  stopExamTimer();
  examTimerInterval = setInterval(() => {
    examRemaining--;
    renderTimer();
    saveState();
    if (examRemaining <= 0) {
      stopExamTimer();
      finish(); 
      alert("Час закінчився. Тест завершено.");
    }
  }, 1000);
}

function stopExamTimer() {
  if (examTimerInterval) {
    clearInterval(examTimerInterval);
    examTimerInterval = null;
  }
}

function renderTimer() {
  const el = document.getElementById("exam-timer");
  if (!el) return;
  const mm = String(Math.floor(examRemaining / 60)).padStart(2, "0");
  const ss = String(examRemaining % 60).padStart(2, "0");
  el.innerText = `⏱ ${mm}:${ss}`;
}

function renderQuiz() {
  container.innerHTML = "";
  if (currentQuestion >= QUESTIONS.length) return finish();

  const q = QUESTIONS[currentQuestion];

  const wrap = document.createElement("div");
  wrap.className = "bg-white dark:bg-[#071025] dark:text-slate-100 rounded-2xl shadow-xl p-6 md:p-8";

  wrap.innerHTML = `
    <div class='mb-6 flex items-start justify-between gap-4'>
      <div>
        <h1 class='text-2xl font-bold mb-2'>Тест</h1>
        <div class='text-sm text-gray-600 dark:text-gray-300'>Питання ${currentQuestion + 1} з ${QUESTIONS.length}</div>
      </div>
      <div class='text-right'>
        <div id='exam-timer' class='text-sm text-gray-600 dark:text-gray-300'></div>
        <div class='mt-2 text-sm'>
        </div>
      </div>
    </div>

    <h2 class='text-xl font-semibold mb-6'>${escapeHtml(q.question)}</h2>
    <div id='options' class='space-y-3'></div>
    <div id='explanation' class='mt-6'></div>
    <div class='mt-6 flex gap-3'>
      <button id='nextBtn' class='flex-1 bg-purple-600 text-white py-3 rounded-xl hidden'>Наступне</button>
      <button id='prevBtn' class='px-4 py-3 border rounded-xl hidden'>Назад</button>
    </div>
  `;

  container.appendChild(wrap);
  const options = document.getElementById('options');

  q.options.forEach((opt, i) => {
    const b = document.createElement('button');
    b.className = "w-full p-4 text-left rounded-xl border-2 border-gray-200 dark:border-gray-700 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900 transition";
    b.innerText = opt;
    b.onclick = () => handleSelect(i + 1, b);
    options.appendChild(b);
  });

  const prevBtn = document.getElementById("prevBtn");
  if (currentQuestion > 0) {
    prevBtn.classList.remove("hidden");
    prevBtn.onclick = () => {
      currentQuestion = Math.max(0, currentQuestion - 1);
      selectedAnswer = null;
      selectedAnswers = [];
      renderQuiz();
    };
  } else {
    prevBtn.classList.add("hidden");
  }

  document.getElementById("saveProgressBtn").onclick = () => {
    saveState();
    alert("Прогрес збережено.");
  };
  document.getElementById("resetProgressBtn").onclick = () => {
    if (confirm("Скинути весь прогрес і почати з початку?")) {
      clearState();
      location.reload();
    }
  };

  renderTimer();
}

function escapeHtml(str){
  return str.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

function handleSelect(index, btn) {
  const q = QUESTIONS[currentQuestion];
  const nextBtn = document.getElementById("nextBtn");

  if (Array.isArray(q.answer)) {
    if (!selectedAnswers.includes(index)) {
      selectedAnswers.push(index);
      btn.classList.add("option-selected");
    } else {
      selectedAnswers = selectedAnswers.filter(x => x !== index);
      btn.classList.remove("border-blue-500", "bg-blue-50");
    }
    nextBtn.classList.remove("hidden");
    nextBtn.onclick = () => checkMultiple();
    return;
  }

  if (selectedAnswer !== null) return; 
  selectedAnswer = index;
  checkSingle();
}

function checkSingle() {
  const q = QUESTIONS[currentQuestion];
  const explanation = document.getElementById("explanation");
  const nextBtn = document.getElementById("nextBtn");

  const correct = selectedAnswer === q.answer;

  document.querySelectorAll('#options button').forEach((b, i) => {
    b.disabled = true;
    if (i + 1 === q.answer) b.classList.add('option-correct');
    if (i + 1 === selectedAnswer && !correct) b.classList.add('option-wrong');
  });

  if (correct) score++;
  explanation.innerHTML = `<p class='font-semibold'>${correct ? "Правильно" : "Неправильно"}</p>`;

  nextBtn.classList.remove('hidden');
  nextBtn.onclick = () => { currentQuestion++; selectedAnswer=null; renderQuiz(); saveState(); };
  saveState();
}

function checkMultiple() {
  const q = QUESTIONS[currentQuestion];
  const explanation = document.getElementById("explanation");
  const nextBtn = document.getElementById("nextBtn");

  const buttons = document.querySelectorAll('#options button');

  buttons.forEach((b, i) => {
    b.disabled = true;
    if (q.answer.includes(i + 1)) b.classList.add('option-correct');
  });

  selectedAnswers.forEach(sel => {
   if (!q.answer.includes(sel)) buttons[sel - 1].classList.add('option-wrong');
  });

  const correct =
    selectedAnswers.length === q.answer.length &&
    selectedAnswers.every(v => q.answer.includes(v));

  if (correct) score++;

  explanation.innerHTML = `<p class='font-semibold'>${correct ? "Правильно" : "Неправильно"}</p>`;

  nextBtn.onclick = () => {
    currentQuestion++;
    selectedAnswers = [];
    renderQuiz();
    saveState();
  };
  saveState();
}

function finish() {
  stopExamTimer();
  clearState(); 
  container.innerHTML = `
    <div class='bg-white dark:bg-[#071025] rounded-2xl shadow-xl p-8 text-center'>
      <h2 class='text-3xl font-bold mb-4'>Тест завершено!</h2>
      <p class='text-xl mb-6'>Ваш результат: ${score} з ${QUESTIONS.length}</p>
      <div class="flex justify-center gap-4">
        <button id='retryBtn' class='bg-purple-600 text-white py-3 px-8 rounded-xl'>Пройти знову</button>
        <button id='viewKeysBtn' class='border py-3 px-6 rounded-xl'>Переглянути правильні відповіді</button>
      </div>
    </div>
  `;
  document.getElementById("retryBtn").onclick = () => restart();
  document.getElementById("viewKeysBtn").onclick = () => showAnswerKey();
}

function restart(){
  currentQuestion=0; score=0; selectedAnswer=null; selectedAnswers=[]; examMode=false; examRemaining=EXAM_SECONDS;
  clearState();
  renderQuiz();
}


function showAnswerKey() {
  const list = QUESTIONS.map((q, idx) => {
    let ansText;
    if (Array.isArray(q.answer)) {
      ansText = q.answer.map(i => `${i}. ${q.options[i-1]}`).join(" | ");
    } else {
      ansText = `${q.answer}. ${q.options[q.answer-1]}`;
    }
    return `<li class="mb-2"><strong>Питання ${idx+1}:</strong> ${escapeHtml(q.question)}<br><span class="text-sm text-gray-600 dark:text-gray-300">Правильні відповіді: ${escapeHtml(ansText)}</span></li>`;
  }).join("");
  container.innerHTML = `
    <div class='bg-white dark:bg-[#071025] rounded-2xl shadow-xl p-8'>
      <h2 class='text-2xl font-bold mb-4'>Ключ відповідей</h2>
      <ol class='list-decimal ml-6 text-sm'>${list}</ol>
      <div class='text-center mt-6'>
        <button id='backToResult' class='bg-purple-600 text-white py-2 px-4 rounded-xl'>Назад</button>
      </div>
    </div>
  `;
  document.getElementById("backToResult").onclick = () => finish();
}

document.getElementById("startExamBtn").addEventListener("click", () => {
  if (!examMode) {
    if (!confirm("Почати режим «Екзамен» з таймером (20 хв)? Режим блокуватиме зміну відповідей після вибору і буде автоматично завершений по таймеру.")) return;
    examMode = true;
    examRemaining = EXAM_SECONDS;
    startExamTimer();
 
    currentQuestion = 0;
    score = 0;
    selectedAnswer = null;
    selectedAnswers = [];
    saveState();
    renderQuiz();
    document.getElementById("startExamBtn").innerText = "Екзамен: активний";
    document.getElementById("startExamBtn").classList.add("opacity-80");
  } else {
    if (!confirm("Вийти з режиму екзамену? (таймер зупиниться і прогрес буде збережено)")) return;
    examMode = false;
    stopExamTimer();
    saveState();
    renderQuiz();
    document.getElementById("startExamBtn").innerText = "Режим «Екзамен»";
  }
});

if (loadState()) {

  if (examMode) {
    if (examRemaining > 0) startExamTimer();
    document.getElementById("startExamBtn").innerText = "Екзамен: активний";
  }
  renderQuiz();
} else {
  renderQuiz();
}

renderTimer();

window.addEventListener("beforeunload", () => {
  saveState();

});
</script>
</body>
</html>

